{% extends "base.html" %}

{% block title %}Manage Team Members{% endblock %}

{% block content %}
<div class="min-h-screen py-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Header -->
        <div class="text-center mb-16 animate-fade-in">
            <h1 class="text-4xl md:text-5xl font-bold text-white mb-6">
                Manage <span class="text-yellow-400">Team Members</span>
            </h1>
            <p class="text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed">
                Add, edit, and manage team members for the Foto-Grafica community.
            </p>
        </div>

        <!-- Add New Team Member Form -->
        <div class="bg-gray-800/50 border border-gray-700 rounded-lg p-6 mb-12 animate-on-scroll">
            <h3 class="text-xl font-semibold text-white mb-4">Add New Team Member</h3>
            <form method="POST">
                {{ form.hidden_tag() }}
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        {{ form.name.label(class="block text-sm font-medium text-gray-300 mb-2") }}
                        {{ form.name(class="w-full p-2 border border-gray-600 rounded bg-white text-black") }}
                    </div>
                    <div>
                        {{ form.role.label(class="block text-sm font-medium text-gray-300 mb-2") }}
                        {{ form.role(class="w-full p-2 border border-gray-600 rounded bg-white text-black") }}
                    </div>
                </div>
                <div class="mb-4">
                    {{ form.specialty.label(class="block text-sm font-medium text-gray-300 mb-2") }}
                    {{ form.specialty(class="w-full p-2 border border-gray-600 rounded bg-white text-black") }}
                </div>
                <div class="mb-4">
                    {{ form.bio.label(class="block text-sm font-medium text-gray-300 mb-2") }}
                    {{ form.bio(class="w-full p-2 border border-gray-600 rounded bg-white text-black", rows=3) }}
                </div>
                <div class="mb-4">
                    {{ form.image.label(class="block text-sm font-medium text-gray-300 mb-2") }}
                    {{ form.image(class="w-full p-2 border border-gray-600 rounded bg-white text-black", placeholder="Image URL, e.g., https://example.com/image.jpg") }}
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-300 mb-2">Achievements</label>
                    <div id="achievements-container">
                        <!-- Dynamic achievements will be added here -->
                    </div>
                    <button type="button" onclick="addAchievement()" class="mt-2 bg-yellow-500 hover:bg-yellow-600 text-black px-3 py-1 rounded text-sm">Add Achievement</button>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-300 mb-2">Social Links</label>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs text-gray-400 mb-1">Instagram</label>
                            <input type="url" name="instagram" class="w-full p-2 border border-gray-600 rounded bg-white text-black" placeholder="https://instagram.com/username">
                        </div>
                        <div>
                            <label class="block text-xs text-gray-400 mb-1">Email</label>
                            <input type="email" name="email" class="w-full p-2 border border-gray-600 rounded bg-white text-black" placeholder="email@example.com">
                        </div>
                    </div>
                </div>
                <div class="mb-4 flex items-center">
                    {{ form.is_core(class="mr-2") }}
                    {{ form.is_core.label(class="text-gray-300") }}
                </div>
                {{ form.submit(class="bg-yellow-500 hover:bg-yellow-600 text-black px-4 py-2 rounded font-semibold") }}
            </form>
        </div>
        <!-- Core Team -->
        <div class="mb-12">
            <h3 class="text-2xl font-semibold text-white mb-6">Core Team</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                {% for member in core_team %}
                <div class="bg-gray-800/50 border border-gray-700 rounded-lg overflow-hidden card-hover animate-on-scroll">
                    <div class="relative">
                        <img src="{{ member.image or 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=300&fit=crop' }}" alt="{{ member.name }}" class="w-full h-48 object-cover">
                        <div class="absolute top-4 right-4">
                            <span class="badge bg-yellow-500/20 text-yellow-400 border-yellow-500/30">Core</span>
                        </div>
                    </div>
                    <div class="p-6">
                        <h4 class="text-xl font-semibold text-white mb-2">{{ member.name }}</h4>
                        <p class="text-yellow-400 mb-1">{{ member.role }}</p>
                        <p class="text-gray-400 text-sm mb-3">{{ member.specialty }}</p>
                        <p class="text-gray-300 text-sm mb-4">{{ member.bio[:100] }}...</p>
                        <div class="mb-4">
                            <h5 class="text-white font-semibold text-sm mb-2">Achievements:</h5>
                            {% set achievements = member.achievements | from_json %}
                            {% for ach in achievements %}
                            <div class="flex items-center text-xs text-yellow-400 mb-1">
                                <i data-lucide="award" class="h-3 w-3 mr-1"></i>
                                {{ ach }}
                            </div>
                            {% endfor %}
                        </div>
                        <div class="flex justify-center gap-2 mb-4">
                            {% set social = member.social | from_json %}
                            {% if social.instagram %}
                            <a href="{{ social.instagram }}" class="text-gray-400 hover:text-yellow-400 transition-colors" target="_blank">
                                <i data-lucide="instagram" class="h-5 w-5"></i>
                            </a>
                            {% endif %}
                            {% if social.email %}
                            <a href="mailto:{{ social.email }}" class="text-gray-400 hover:text-yellow-400 transition-colors">
                                <i data-lucide="mail" class="h-5 w-5"></i>
                            </a>
                            {% endif %}
                        </div>
                        <div class="flex gap-2">
                            <a href="{{ url_for('edit_team_member', member_id=member.id) }}" class="btn btn-secondary flex-1">Edit</a>
                            <a href="{{ url_for('delete_team_member', member_id=member.id) }}" class="btn btn-danger flex-1" onclick="return confirm('Are you sure?')">Delete</a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- Active Members -->
        <div class="mb-12">
            <h3 class="text-2xl font-semibold text-white mb-6">Active Members</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                {% for member in active_members %}
                <div class="bg-gray-800/50 border border-gray-700 rounded-lg overflow-hidden card-hover animate-on-scroll">
                    <div class="relative">
                        <img src="{{ member.image or 'https://images.unsplash.com/photo-1494790108755-2616b612b786?w=400&h=300&fit=crop' }}" alt="{{ member.name }}" class="w-full h-40 object-cover">
                        <div class="absolute top-4 right-4">
                            <span class="badge bg-green-500/20 text-green-400 border-green-500/30">Active</span>
                        </div>
                    </div>
                    <div class="p-4">
                        <h5 class="text-lg font-semibold text-white mb-1">{{ member.name }}</h5>
                        <p class="text-yellow-400 text-sm mb-1">{{ member.role }}</p>
                        <p class="text-gray-400 text-xs mb-2">{{ member.specialty }}</p>
                        <p class="text-gray-300 text-xs mb-3">{{ member.bio[:80] }}...</p>
                        <div class="flex justify-center gap-2 mb-3">
                            {% set social = member.social | from_json %}
                            {% if social.instagram %}
                            <a href="{{ social.instagram }}" class="text-gray-400 hover:text-yellow-400 transition-colors" target="_blank">
                                <i data-lucide="instagram" class="h-4 w-4"></i>
                            </a>
                            {% endif %}
                            {% if social.email %}
                            <a href="mailto:{{ social.email }}" class="text-gray-400 hover:text-yellow-400 transition-colors">
                                <i data-lucide="mail" class="h-4 w-4"></i>
                            </a>
                            {% endif %}
                        </div>
                        <div class="flex gap-2">
                            <a href="{{ url_for('edit_team_member', member_id=member.id) }}" class="btn btn-secondary flex-1 text-xs">Edit</a>
                            <a href="{{ url_for('delete_team_member', member_id=member.id) }}" class="btn btn-danger flex-1 text-xs" onclick="return confirm('Are you sure?')">Delete</a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>

        <div class="text-center mt-8">
            <a href="{{ url_for('admin') }}" class="btn btn-secondary">Back to Admin</a>
        </div>
    </div>
</div>
{% endblock %}
